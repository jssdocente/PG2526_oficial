# ‚öì B06.2 Hundir la Flota: Edici√≥n Orientada a Objetos

En la unidad anterior, programaste el juego "Hundir la Flota" utilizando matrices (`int[][]`) y un mont√≥n de m√©todos est√°ticos. ¬°Funcionaba! Pero seamos sinceros: pasar `x` e `y` por todos lados y recordar que `6` significa "tocado" es agotador y propenso a errores.

En este reto, vamos a **redise√±ar** el juego completo aplicando POO. Vamos a modelar los conceptos del juego (Barcos, Tableros, Jugadores) como **Objetos**.

> üìÇ **Recursos**: Se proporciona la carpeta `B06.2_base` con la estructura de clases sugerida (`Direccion`, `EstadoCasilla`, `Jugador`, etc.) listas para ser implementadas.

---

## üèóÔ∏è El Nuevo Dise√±o

Olv√≠date de `int[][] tablero`. Piensa en las entidades que forman parte del juego.

### üìç 1. La Jerarqu√≠a de Coordenadas
El √°tomo del juego. Vamos a hacerlo robusto usando **Herencia**.

- **Clase Abstracta `Componente`**:
    - Representa una parte de la coordenada (fila o columna).
    - Atributo: `int valor` (el √≠ndice num√©rico real).
    - M√©todo: `getValue()` que devuelve ese valor.

- **Clase `Columna` extends `Componente`**:
    - Constructor: `public Columna(String letra)` -> Convierte "A" en 0, "B" en 1, etc.
    - `toString()`: Devuelve la letra ("A").

- **Clase `Fila` extends `Componente`**:
    - Constructor: `public Fila(int numero)`.
    - `toString()`: Devuelve el n√∫mero.

- **Clase `Coordenada`**:
    - Atributos: `Fila fila`, `Columna columna`.
    - **Constructor**: `public Coordenada(String coordenada)` -> Parsea un string como "A5" o "C10".
        - Debe separar la letra de la columna y el n√∫mero de la fila.
        - Crear los objetos `Fila` y `Columna` correspondientes.
    - `toString()`: Devuelve "A-5".
    - `equals(Object o)`: Vital para comparar.

### üö¢ 2. La Clase `Barco`
Un barco ya no es un conjunto de n√∫meros en una matriz. Es una entidad con vida propia.
- **Atributos**:
    - `nombre` (String): "Portaaviones", "Lancha"...
    - `tama√±o` (int).
    - `vidas` (int): Empieza igual al tama√±o y baja con cada impacto.
- **M√©todos**:
    - `recibirImpacto()`: Resta una vida.
    - `estaHundido()`: Devuelve `true` si las vidas llegan a 0.

### üó∫Ô∏è 3. La Clase `Tablero`
Es el responsable de organizar el juego. 
- **Estructura Interna**:
    - Puedes seguir usando una matriz, pero ahora ser√° de **Casillas**: `Casilla[10][10]`.
    - **Clase `Casilla`**:
        - `EstadoCasilla estado`: Usa un **enum** (`AGUA`, `AGUA_DISPARADA`, `BARCO`, `TOCADO`) en lugar de n√∫meros m√°gicos.
        - `Barco contenido`: Referencia al objeto Barco (null si no hay).
- **Responsabilidades (M√©todos)**:
    - `colocarBarco(Barco b, Coordenada inicio, Direccion d)`: 
        - **`Direccion`**: Define un **enum** (`NORTE`, `SUR`, `ESTE`, `OESTE`) para indicar la orientaci√≥n. Mucho m√°s legible que 0, 1, 2...
    - `recibirDisparo(Coordenada c)`: 
        - Si hay `AGUA` -> Marca `AGUA_DISPARADA`.
        - Si hay barco -> Llama a `barco.recibirImpacto()` y marca TOCADO. Si el barco se hunde, avisa.
    - `mostrar()`: Imprime el estado actual del tablero por consola.

### üë§ 4. La Clase `Jugador`
Aqu√≠ viene la magia de la herencia. Tanto t√∫ como la m√°quina sois jugadores, pero decid√≠s vuestro disparo de forma diferente.

- **Clase Abstracta `Jugador`**:
    - Tiene su propio `Tablero` (mis barcos) y una referencia al `Tablero` del rival (sus barcos).
    - M√©todo **abstracto**: `Coordenada elegirDisparo()`.
- **`JugadorHumano`**:
    - Implementa `elegirDisparo()` pidiendo fila y columna por **teclado**.
- **`JugadorMaquina`**:
    - Implementa `elegirDisparo()` generando una coordenada **aleatoria** (y verificando que no haya disparado ah√≠ antes).

---

## üéÆ El Flujo del Juego (Clase Main)

Gracias a este dise√±o, tu m√©todo `main` (o clase `Juego`) ser√° incre√≠blemente limpio:

```java
public void jugar() {
    Jugador j1 = new JugadorHumano("Profe");
    Jugador j2 = new JugadorMaquina("Skynet");

    Jugador turnoActual = j1;

    while (j1.tieneBarcos() && j2.tieneBarcos()) {
        // 1. Decidir disparo
        Coordenada disparo = turnoActual.elegirDisparo();
        
        // 2. Ejecutar disparo
        ResultadoResparo res = turnoActual.getTableroRival().recibirDisparo(disparo);
        
        // 3. Informar
        System.out.println("Disparo en " + disparo + ": " + res);
        
        // 4. Cambio de turno
        turnoActual = (turnoActual == j1) ? j2 : j1;
    }
}
```

## üìù Tu Misi√≥n
1.  Crea las clases b√°sicas (`Coordenada`, `Barco`).
2.  Implementa el `Tablero` encapsulando la matriz l√≥gica.
3.  Crea la jerarqu√≠a de `Jugador`.
4.  ¬°Haz que funcione! Disfruta viendo c√≥mo la POO simplifica la gesti√≥n de turnos y reglas.
